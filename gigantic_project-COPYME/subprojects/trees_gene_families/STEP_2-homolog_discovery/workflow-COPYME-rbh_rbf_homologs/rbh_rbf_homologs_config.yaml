# GIGANTIC trees_gene_families STEP_2 - RBH/RBF Homolog Discovery Configuration
# AI: Claude Code | Opus 4.6 | 2026 February 27
# Human: Eric Edsinger
#
# ============================================================================
# HOW TO USE THIS FILE
# ============================================================================
#
# Each workflow copy processes ONE gene family.
# Copy the workflow template, edit this config, then run.
#
# Example:
#   cp -r workflow-COPYME-rbh_rbf_homologs workflow-RUN_01-rbh_rbf_homologs
#   cd workflow-RUN_01-rbh_rbf_homologs
#   # Edit this config file
#   bash RUN-workflow.sh
#
# ============================================================================

# ============================================================================
# GENE FAMILY (EDIT THIS)
# ============================================================================

gene_family:
  # Name of the gene family being analyzed (used in output filenames)
  name: "innexin_pannexin"

  # Path to the RGS FASTA file for this gene family
  rgs_file: "INPUT_user/rgs3-innexin_pannexin-uniprot-2025november01.aa"

# ============================================================================
# INPUT PATHS (EDIT THESE)
# ============================================================================

inputs:
  # Species keeper list (one Genus_species per line)
  # Only species in this list will be kept in the final AGS
  species_keeper_list: "INPUT_user/species_keeper_list.tsv"

  # RGS species map (maps short names in RGS headers to GIGANTIC Genus_species)
  # Format: short_name<TAB>Genus_species
  # Only needed if RGS headers use short names (e.g., "human", "fly", "worm")
  # If RGS headers already use Genus_species format, this can be omitted
  rgs_species_map: "INPUT_user/rgs_species_map.tsv"

  # BLAST protein databases directory (REQUIRED)
  # Path to directory containing per-species .aa BLAST database files
  # From genomesDB subproject: ../../genomesDB/output_to_input/gigantic_T1_blastp/
  blast_databases_dir: "../../../../genomesDB/output_to_input/gigantic_T1_blastp"

  # RGS genomes directory (REQUIRED)
  # Directory containing genome .aa files for RGS species
  # Usually the same as blast_databases_dir
  rgs_genomes_dir: "../../../../genomesDB/output_to_input/gigantic_T1_blastp"

  # CGS identifier mapping file (REQUIRED)
  # Maps short identifiers (first 50 chars) to full GIGANTIC phyloname identifiers
  # From genomesDB subproject
  cgs_mapping_file: "../../../../genomesDB/output_to_input/gigantic_T1_blastp_header_map"

# ============================================================================
# PROJECT SETTINGS
# ============================================================================

project:
  # Project database name (used in output filenames)
  database: "species67_T1-species67"

# ============================================================================
# BLAST PARAMETERS
# ============================================================================

blast:
  # E-value threshold for BLAST searches
  evalue: "1e-3"

  # Number of threads for BLAST searches
  threads: 50

  # Conda environment (ai_gigantic_trees_gene_families includes BLAST)
  conda_env: "ai_gigantic_trees_gene_families"

# ============================================================================
# OUTPUT SETTINGS
# ============================================================================

output:
  base_dir: "OUTPUT_pipeline"

# ============================================================================
# NOTES
# ============================================================================
#
# WORKFLOW STEPS:
#   001: List BLAST databases
#   002: Generate BLASTP commands for RGS vs project database
#   003: Execute BLASTP searches (generated by 002)
#   004: Extract blast gene sequences (BGS) from BLAST hits
#   005: Generate BLASTP commands for RGS vs RGS source genomes
#   006: Execute RGS genome BLASTP searches (generated by 005)
#   007: List RGS BLAST files and identify model organism FASTAs
#   008: Map RGS sequences to reference genome identifiers
#   009: Create modified genomes with RGS sequences
#   010: Combine modified genomes and create BLAST database
#   011: Generate reciprocal BLAST commands
#   012: Execute reciprocal BLAST (generated by 011)
#   013: Extract candidate gene sequences (CGS)
#   014: Filter species by keeper list
#   015: Remap CGS identifiers to GIGANTIC phylonames
#   016: Concatenate RGS + CGS into final AGS (All Gene Set)
#
# OUTPUT STRUCTURE:
#   OUTPUT_pipeline/1-output/ through 16-output/
#
# The final AGS fasta is also copied to:
#   STEP_2-homolog_discovery/output_to_input/ags_fastas/<gene_family>/
#   trees_gene_families/output_to_input/step_2/ags_fastas/<gene_family>/
#
