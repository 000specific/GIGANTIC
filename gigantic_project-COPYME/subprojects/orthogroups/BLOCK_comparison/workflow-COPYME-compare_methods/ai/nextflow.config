// AI: Claude Code | Opus 4.6 | 2026 February 28 | Purpose: Nextflow configuration for orthogroup method comparison pipeline
// Human: Eric Edsinger

// Orthogroup Method Comparison Pipeline Configuration
// Compares results from OrthoFinder, OrthoHMM, and Broccoli

params {
    // Input: output_to_input directories from each tool project
    orthofinder_dir = '../../BLOCK_orthofinder/output_to_input'
    orthohmm_dir = '../../BLOCK_orthohmm/output_to_input'
    broccoli_dir = '../../BLOCK_broccoli/output_to_input'

    // Pipeline output
    output_dir = 'OUTPUT_pipeline'
}

process {
    errorStrategy = { task.attempt <= 2 ? 'retry' : 'terminate' }
    maxRetries = 2
    maxErrors = 0

    withName: 'load_tool_results' {
        cpus = 1
        memory = '8 GB'
        time = '30m'
    }

    withName: 'compare_methods' {
        cpus = 1
        memory = '16 GB'
        time = '1h'
    }

}

timeline {
    enabled = true
    file = "${params.output_dir}/pipeline_timeline.html"
}

report {
    enabled = true
    file = "${params.output_dir}/pipeline_report.html"
}
